{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AULAFISI\\\\Desktop\\\\teamrocket-reports-front-master\\\\src\\\\ComponentesHechos\\\\TiposDeBeneficio\\\\TiposDeBeneficio.js\";\n\n/* App.js */\nimport React, { Component } from 'react';\nimport { Tabs, Tab } from 'react-bootstrap';\nimport CanvasJSReact, { CanvasJS } from '../../canvasjs.react';\nimport Parser from 'html-react-parser';\nimport Pdf from '../Pdf/pdf';\nimport html2canvas from 'html2canvas';\nimport htmlPDF from '../../BibliotecaFunciones/HtmlPDF.js';\nimport { pdf } from '@react-pdf/renderer';\nimport './TiposDeBeneficio.css';\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\nvar url = 'https://teamrocket-reportes-backend.herokuapp.com/ApiController/'; //var pdf = require('html-pdf');\n\nclass TiposDeBeneficio extends Component {\n  constructor(props) {\n    //constructor inicial\n    super(props);\n    this.state = {\n      anioini: '' + this.props.anioIni,\n      //año inicial\n      aniofin: '' + this.props.anioFin,\n      //año final\n      htmlTabla: '',\n      //Html de la tabla\n      cadenaFooter: '',\n      cadenaAnios: '',\n      miHtml: '',\n      tipoGrafica: this.props.graficoMF,\n      tipoGraficaVerificador: this.props.graficoMF,\n      jsonGrafica: null,\n      cargoGrafica: false,\n      cargoTabla: false,\n      cargoTomadorFotos: false,\n      cargoFotos: false,\n      leyenda1: '',\n      leyenda2: '',\n      contadorLineaTabla: 0,\n      contadorTabla: 0,\n      htmlencabezado: [],\n      copiaParaPdf: [],\n      contadorCargaPaginas: 0,\n      arregloImagen: [],\n      tipoGraficaVerificador: this.props.graficoMF,\n      key: 'tabla',\n      titulo: \"Beneficios de los Programas de Posgrado\"\n    };\n    this.obtenerTabla = this.obtenerTabla.bind(this);\n    this.obtenerGrafica = this.obtenerGrafica.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.obtenerTabla();\n    this.obtenerGrafica();\n  }\n\n  handleSelect(key) {\n    this.setState({\n      key\n    });\n  }\n\n  obtenerGrafica() {\n    fetch(url + 'beneficioGrafica?fecha_inicio=' + this.state.anioini + '&fecha_fin=' + this.state.aniofin).then(response => {\n      return response.json();\n    }).then(async result => {\n      var miContador = this.state.anioini;\n      var resultado = [];\n\n      for (let fila of result) {\n        console.log(fila);\n        fila.name = '' + miContador;\n        fila.showInLegend = true;\n        fila.type = this.state.tipoGrafica;\n        miContador++;\n      }\n\n      var arregloData = [];\n      arregloData.push( //<div class=\"row align-items-center\">\n      //<div class=\"col col-md-12\">\n      React.createElement(\"div\", {\n        style: {\n          marginBottom: 50\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(CanvasJSChart, {\n        style: {\n          marginBottom: 50,\n          width: '100%'\n        },\n        options: {\n          animationEnabled: true,\n          title: {\n            text: this.state.titulo,\n            fontFamily: \"Encode Sans Semi Expanded\",\n            fontColor: \"#4C4C4C\",\n            fontWeight: \"normal\"\n          },\n          subtitles: [{\n            text: \" . \",\n            fontSize: 20,\n            fontColor: 'white'\n          }],\n          axisX: {\n            title: \"Programas\",\n            titleFontFamily: \"Encode Sans Semi Expanded\",\n            titleFontColor: \"#4C4C4C\",\n            lineColor: \"#4C4C4C\",\n            labelFontColor: \"#4C4C4C\",\n            tickColor: \"#4C4C4C\"\n          },\n          axisY: {\n            title: \"Alumnos\",\n            titleFontFamily: \"Encode Sans Semi Expanded\",\n            titleFontColor: \"#4C4C4C\",\n            lineColor: \"#4C4C4C\",\n            labelFontColor: \"#4C4C4C\",\n            tickColor: \"#4C4C4C\",\n            interlacedColor: \"#F7F7F7\"\n          },\n          toolTip: {\n            shared: true\n          },\n          legend: {\n            cursor: \"pointer\",\n            fontFamily: \"Encode Sans Semi Expanded\",\n            fontWeight: \"normal\"\n          },\n          data: result\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      })) //</div>\n      );\n      await this.setState({\n        jsonGrafica: arregloData,\n        cargoGrafica: true\n      });\n    });\n  }\n\n  obtenerTabla() {\n    fetch(url + 'beneficio?fecha_inicio=' + this.state.anioini + '&fecha_fin=' + this.state.aniofin) //hace el llamado al dominio que se le envió donde retornara respuesta de la funcion\n    .then(response => {\n      return response.json();\n    }).then(async result => {\n      let cadena = \"\";\n      let leyenda = \"\";\n      let leyenda2 = \"\";\n      let cadenaFooter = \"\";\n      var totalD = 0;\n      var totalA = [];\n      var totalTotal = 0;\n      var cadenaAnios = '';\n      var contadorTabla = 10;\n      var contadorLinea = 0;\n\n      for (var i = parseInt(this.state.anioini); i <= parseInt(this.state.aniofin); i++) {\n        cadenaAnios += '<th><b>' + i + '</b></th>';\n        totalA[\"\" + i] = 0;\n      }\n\n      for (var tipo of result) {\n        totalD = 0;\n        cadena = cadena + \"<tr><td>\" + tipo.tipo.substring(0, 3) + \"</td>\";\n\n        for (var i = parseInt(this.state.anioini); i <= parseInt(this.state.aniofin); i++) {\n          cadena += \"<td>\" + tipo.anios[\"\" + i] + \"</td>\";\n          totalD += tipo.anios[\"\" + i];\n          totalA[\"\" + i] += tipo.anios[\"\" + i];\n        }\n\n        cadena += \"<td>\" + totalD + \"</td></tr>\";\n      }\n\n      cadenaFooter = cadenaFooter + \"<tr><td><b>Total General</b></td>\";\n\n      for (var i in totalA) {\n        cadenaFooter = cadenaFooter + \"<td><b>\" + totalA[i] + \"</b></td>\";\n        totalTotal += totalA[i];\n      }\n\n      cadenaFooter = cadenaFooter + \"<td><b>\" + totalTotal + \"</b></td>\"; //Aqui se llena los datos de la leyenda\n\n      leyenda += \"<hr></hr>\";\n      leyenda += \"<text className='textLeyenda'><tr><td>ADM: ADMINISTRATIVO UNMSM</td></text></br>\";\n      leyenda += \"<text className='textLeyenda'><tr><td>DOC: DOCENTE UNMSM</td></text></br>\";\n      leyenda += \"<text className='textLeyenda'><tr><td>EGR: EGRESADO UNMSM</td></text></br>\";\n      leyenda += \"<hr></hr>\";\n      leyenda2 += \"\";\n      contadorLinea += contadorTabla;\n      let encabezado = [];\n      await encabezado.push(React.createElement(\"div\", {\n        class: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"unmsmIMagen.png\",\n        height: \"240\",\n        width: \"180\",\n        style: {\n          marginLeft: 60,\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"col-md-7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"unmsmTitulo.png\",\n        height: \"240\",\n        width: \"500\",\n        style: {\n          marginLeft: 25,\n          marginTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      })));\n      await this.setState({\n        cadenaFooter: cadenaFooter,\n        cadenaAnios: cadenaAnios,\n        htmlTabla: cadena,\n        leyenda1: leyenda,\n        leyenda2: leyenda2,\n        contadorLineaTabla: contadorLinea,\n        contadorTabla: contadorTabla,\n        cargoTabla: true,\n        htmlencabezado: encabezado\n      });\n    });\n  }\n\n  render() {\n    const aI = this.props.anioIni;\n    const aF = this.props.anioFin;\n\n    if (this.state.key == \"pdf\" && !this.state.cargoFotos) {\n      document.body.classList.add(\"oculto\");\n    } else {\n      document.body.classList.remove(\"oculto\");\n    }\n\n    if (this.props.anioFin != this.state.aniofin || this.props.anioIni != this.state.anioini || this.state.tipoGraficaVerificador != this.props.graficoMF) {\n      this.setState({\n        aniofin: this.props.anioFin,\n        anioini: this.props.anioIni,\n        tipoGraficaVerificador: this.props.graficoMF,\n        tipoGrafica: this.props.graficoMF,\n        cargoGrafica: false,\n        cargoTabla: false,\n        cargoTomadorFotos: false,\n        cargoFotos: false\n      }, async () => {\n        this.obtenerTabla();\n        this.obtenerGrafica();\n      });\n    }\n\n    if (this.state.cargoTabla && this.state.cargoGrafica && !this.state.cargoTomadorFotos && this.state.key == \"pdf\") {\n      setTimeout(() => {\n        htmlPDF(this.state.contadorLineaTabla, this.state.contadorTabla, this.state.cadenaAnios, this.state.htmlTabla, this.state.leyenda1, this.state.leyenda2, this.state.htmlencabezado, this.props.anioIni, this.props.anioFin, this.state.jsonGrafica, this.props.anioFin, this.state.cadenaFooter, null, this.state.titulo).then(async x => {\n          console.log(x);\n          this.setState({\n            copiaParaPdf: x,\n            cargoTomadorFotos: true\n          }, () => {\n            setTimeout(async () => {\n              var arregloImagen = [];\n\n              for (var i = 1; i <= this.state.copiaParaPdf.length; i++) {\n                const input2 = await document.getElementById('imagenPdf' + i);\n                await html2canvas(input2).then(async canvas2 => {\n                  const imgData2 = await canvas2.toDataURL('image/png');\n                  await arregloImagen.push({\n                    imagen: imgData2,\n                    orden: i\n                  });\n                  await this.setState({\n                    contadorCargaPaginas: this.state.contadorCargaPaginas + 1\n                  }, () => {\n                    if (this.state.contadorCargaPaginas == this.state.copiaParaPdf.length) {\n                      setTimeout(async () => {\n                        this.setState({\n                          arregloImagen: arregloImagen,\n                          cargoFotos: true,\n                          contadorCargaPaginas: 0\n                        }, () => {\n                          this.setState({\n                            cargoFotos: true\n                          });\n                        });\n                      }, 3000);\n                    }\n                  });\n                });\n              }\n            }, 3000);\n          });\n        });\n      }, 3000);\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, React.createElement(Tabs, {\n      activeKey: this.state.key,\n      onSelect: key => this.handleSelect(key),\n      align: \"center\",\n      className: \"textTab\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, React.createElement(Tab, {\n      eventKey: \"tabla\",\n      title: \"Tabla\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"panel-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"row\",\n      style: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"textTitulo\",\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }, this.state.titulo)), React.createElement(\"div\", {\n      className: \"textTitulo col-md-12\",\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, \"Espacio Temporal: \", aI == aF ? aI : aI + \" al \" + aF))), React.createElement(\"div\", {\n      className: \"panel-body\",\n      style: {\n        marginTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-md-10\",\n      style: {\n        marginTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-bordered TablaEstadisticaAzul\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }, \"Programas\")), Parser(this.state.cadenaAnios), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, \"Total General\")))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, Parser(this.state.htmlTabla)), React.createElement(\"tfoot\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, Parser(this.state.cadenaFooter))))), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col col-md-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col col-md-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      style: {\n        marginLeft: 10,\n        fontSize: 13\n      },\n      className: \"textSubtitulo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, \"Leyenda: \"), Parser(this.state.leyenda1)))))), React.createElement(Tab, {\n      eventKey: \"grafica\",\n      title: \"Gr\\xE1fica\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      style: {\n        marginLeft: 10,\n        marginTop: 20\n      },\n      className: \"textTitulo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, \"Gr\\xE1ficas: \"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    })), this.state.cargoGrafica ? React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"panel-body col-md-7 mr-md-auto ml-md-auto\",\n      style: {\n        marginBottom: 50\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, this.state.jsonGrafica)) : null)), React.createElement(Tab, {\n      eventKey: \"pdf\",\n      title: \"PDF\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel row align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: this.state.cargoTabla && this.state.cargoGrafica && this.state.cargoFotos ? {\n        display: 'none'\n      } : null,\n      className: \"panel-heading col col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col col-md-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"col col-md-2\",\n      style: {\n        textAlign: \"center\",\n        marginTop: 180\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"spiner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"ball\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"ball1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"col col-md-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"col col-md-12\",\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, \"Cargando...\")), this.state.cargoFotos ? React.createElement(\"h4\", {\n      style: {\n        marginLeft: 60\n      },\n      className: \"texTitulo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }, \"Visualizar PDF\") : null)), React.createElement(\"div\", {\n      className: \"panel-body col-md-11 mr-md-auto ml-md-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, this.state.cargoFotos ? React.createElement(Pdf, {\n      imagen2: this.state.arregloImagen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395\n      },\n      __self: this\n    }) : null)), React.createElement(\"div\", {\n      style: this.state.cargoTabla && this.state.cargoGrafica && this.state.cargoFotos ? {\n        display: 'none'\n      } : {\n        marginTop: 500\n      },\n      id: \"copia\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }, this.state.copiaParaPdf))));\n  }\n\n}\n\nexport default TiposDeBeneficio;","map":{"version":3,"sources":["C:\\Users\\AULAFISI\\Desktop\\teamrocket-reports-front-master\\src\\ComponentesHechos\\TiposDeBeneficio\\TiposDeBeneficio.js"],"names":["React","Component","Tabs","Tab","CanvasJSReact","CanvasJS","Parser","Pdf","html2canvas","htmlPDF","pdf","CanvasJSChart","url","TiposDeBeneficio","constructor","props","state","anioini","anioIni","aniofin","anioFin","htmlTabla","cadenaFooter","cadenaAnios","miHtml","tipoGrafica","graficoMF","tipoGraficaVerificador","jsonGrafica","cargoGrafica","cargoTabla","cargoTomadorFotos","cargoFotos","leyenda1","leyenda2","contadorLineaTabla","contadorTabla","htmlencabezado","copiaParaPdf","contadorCargaPaginas","arregloImagen","key","titulo","obtenerTabla","bind","obtenerGrafica","handleSelect","setState","fetch","then","response","json","result","miContador","resultado","fila","console","log","name","showInLegend","type","arregloData","push","marginBottom","width","animationEnabled","title","text","fontFamily","fontColor","fontWeight","subtitles","fontSize","axisX","titleFontFamily","titleFontColor","lineColor","labelFontColor","tickColor","axisY","interlacedColor","toolTip","shared","legend","cursor","data","cadena","leyenda","totalD","totalA","totalTotal","contadorLinea","i","parseInt","tipo","substring","anios","encabezado","marginLeft","marginTop","render","aI","aF","document","body","classList","add","remove","setTimeout","x","length","input2","getElementById","canvas2","imgData2","toDataURL","imagen","orden","alignItems","justifyContent","display","textAlign"],"mappings":";;AAAA;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAAeC,GAAf,QAA0B,iBAA1B;AACA,OAAOC,aAAP,IAAwBC,QAAxB,QAAwC,sBAAxC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,GAAP,MAAgB,YAAhB;AACA,OAAOC,WAAP,MAAwB,aAAxB;AACA,OAAOC,OAAP,MAAoB,sCAApB;AACA,SAASC,GAAT,QAAoB,qBAApB;AACA,OAAO,wBAAP;AACA,IAAIC,aAAa,GAAGP,aAAa,CAACO,aAAlC;AAEA,IAAIC,GAAG,GAAG,kEAAV,C,CAEA;;AAGA,MAAMC,gBAAN,SAA+BZ,SAA/B,CAAyC;AAErCa,EAAAA,WAAW,CAACC,KAAD,EAAO;AAAC;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,OAAO,EAAG,KAAG,KAAKF,KAAL,CAAWG,OADf;AACwB;AACjCC,MAAAA,OAAO,EAAG,KAAG,KAAKJ,KAAL,CAAWK,OAFf;AAEwB;AACjCC,MAAAA,SAAS,EAAG,EAHH;AAGS;AAClBC,MAAAA,YAAY,EAAE,EAJL;AAKTC,MAAAA,WAAW,EAAE,EALJ;AAMTC,MAAAA,MAAM,EAAE,EANC;AAOTC,MAAAA,WAAW,EAAE,KAAKV,KAAL,CAAWW,SAPf;AAQTC,MAAAA,sBAAsB,EAAE,KAAKZ,KAAL,CAAWW,SAR1B;AASTE,MAAAA,WAAW,EAAE,IATJ;AAUTC,MAAAA,YAAY,EAAE,KAVL;AAWTC,MAAAA,UAAU,EAAE,KAXH;AAYTC,MAAAA,iBAAiB,EAAE,KAZV;AAaTC,MAAAA,UAAU,EAAE,KAbH;AAcTC,MAAAA,QAAQ,EAAE,EAdD;AAeTC,MAAAA,QAAQ,EAAE,EAfD;AAgBTC,MAAAA,kBAAkB,EAAE,CAhBX;AAiBTC,MAAAA,aAAa,EAAE,CAjBN;AAkBTC,MAAAA,cAAc,EAAE,EAlBP;AAmBTC,MAAAA,YAAY,EAAE,EAnBL;AAoBTC,MAAAA,oBAAoB,EAAC,CApBZ;AAqBTC,MAAAA,aAAa,EAAC,EArBL;AAsBTb,MAAAA,sBAAsB,EAAE,KAAKZ,KAAL,CAAWW,SAtB1B;AAuBTe,MAAAA,GAAG,EAAE,OAvBI;AAwBTC,MAAAA,MAAM,EAAE;AAxBC,KAAb;AA4BA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKE,YAAL,GAAoB,KAAKA,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAApB;AAEA,SAAKD,YAAL;AACA,SAAKE,cAAL;AACH;;AAEDC,EAAAA,YAAY,CAACL,GAAD,EAAM;AACd,SAAKM,QAAL,CAAc;AAACN,MAAAA;AAAD,KAAd;AACH;;AAEDI,EAAAA,cAAc,GAAG;AACbG,IAAAA,KAAK,CAACpC,GAAG,GAAC,gCAAJ,GAAqC,KAAKI,KAAL,CAAWC,OAAhD,GAAwD,aAAxD,GAAsE,KAAKD,KAAL,CAAWG,OAAlF,CAAL,CACC8B,IADD,CACOC,QAAD,IAAY;AACd,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,KAHD,EAICF,IAJD,CAIM,MAAOG,MAAP,IAAgB;AAElB,UAAIC,UAAU,GAAG,KAAKrC,KAAL,CAAWC,OAA5B;AACA,UAAIqC,SAAS,GAAE,EAAf;;AACD,WAAK,IAAIC,IAAT,IAAiBH,MAAjB,EAAyB;AACpBI,QAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAA,QAAAA,IAAI,CAACG,IAAL,GAAU,KAAGL,UAAb;AACAE,QAAAA,IAAI,CAACI,YAAL,GAAkB,IAAlB;AACAJ,QAAAA,IAAI,CAACK,IAAL,GAAU,KAAK5C,KAAL,CAAWS,WAArB;AACA4B,QAAAA,UAAU;AACb;;AAED,UAAIQ,WAAW,GAAG,EAAlB;AACAA,MAAAA,WAAW,CAACC,IAAZ,EACI;AACI;AACA;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,YAAY,EAAE;AAAhB,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,aAAD;AAAe,QAAA,KAAK,EAAE;AAACA,UAAAA,YAAY,EAAE,EAAf;AAAkBC,UAAAA,KAAK,EAAC;AAAxB,SAAtB;AAAuD,QAAA,OAAO,EAAI;AAC9DC,UAAAA,gBAAgB,EAAE,IAD4C;AAE9DC,UAAAA,KAAK,EAAC;AACFC,YAAAA,IAAI,EAAE,KAAKnD,KAAL,CAAW0B,MADf;AAEF0B,YAAAA,UAAU,EAAE,2BAFV;AAGFC,YAAAA,SAAS,EAAE,SAHT;AAIFC,YAAAA,UAAU,EAAE;AAJV,WAFwD;AAQ9DC,UAAAA,SAAS,EAAC,CACV;AACIJ,YAAAA,IAAI,EAAE,KADV;AAEIK,YAAAA,QAAQ,EAAE,EAFd;AAGIH,YAAAA,SAAS,EAAC;AAHd,WADU,CARoD;AAe9DI,UAAAA,KAAK,EAAC;AACFP,YAAAA,KAAK,EAAE,WADL;AAEFQ,YAAAA,eAAe,EAAE,2BAFf;AAGFC,YAAAA,cAAc,EAAE,SAHd;AAIFC,YAAAA,SAAS,EAAE,SAJT;AAKFC,YAAAA,cAAc,EAAE,SALd;AAMFC,YAAAA,SAAS,EAAE;AANT,WAfwD;AAuB9DC,UAAAA,KAAK,EAAE;AACHb,YAAAA,KAAK,EAAE,SADJ;AAEHQ,YAAAA,eAAe,EAAE,2BAFd;AAGHC,YAAAA,cAAc,EAAE,SAHb;AAIHC,YAAAA,SAAS,EAAE,SAJR;AAKHC,YAAAA,cAAc,EAAE,SALb;AAMHC,YAAAA,SAAS,EAAE,SANR;AAOHE,YAAAA,eAAe,EAAE;AAPd,WAvBuD;AAgC9DC,UAAAA,OAAO,EAAE;AACLC,YAAAA,MAAM,EAAE;AADH,WAhCqD;AAmC9DC,UAAAA,MAAM,EAAE;AACJC,YAAAA,MAAM,EAAC,SADH;AAEJhB,YAAAA,UAAU,EAAE,2BAFR;AAGJE,YAAAA,UAAU,EAAE;AAHR,WAnCsD;AAyC9De,UAAAA,IAAI,EAAEjC;AAzCwD,SAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAHR,CAiDI;AAjDJ;AAoDA,YAAM,KAAKL,QAAL,CAAc;AAChBnB,QAAAA,WAAW,EAACiC,WADI;AAEhBhC,QAAAA,YAAY,EAAC;AAFG,OAAd,CAAN;AAIH,KAzED;AA0EH;;AAGDc,EAAAA,YAAY,GAAE;AAEVK,IAAAA,KAAK,CAACpC,GAAG,GAAC,yBAAJ,GAA8B,KAAKI,KAAL,CAAWC,OAAzC,GAAiD,aAAjD,GAA+D,KAAKD,KAAL,CAAWG,OAA3E,CAAL,CAAwF;AAAxF,KACC8B,IADD,CACOC,QAAD,IAAY;AACd,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,KAHD,EAICF,IAJD,CAIM,MAAOG,MAAP,IAAgB;AAElB,UAAIkC,MAAM,GAAC,EAAX;AACA,UAAIC,OAAO,GAAG,EAAd;AACA,UAAIrD,QAAQ,GAAG,EAAf;AACA,UAAIZ,YAAY,GAAG,EAAnB;AACA,UAAIkE,MAAM,GAAC,CAAX;AACA,UAAIC,MAAM,GAAG,EAAb;AACA,UAAIC,UAAU,GAAG,CAAjB;AACA,UAAInE,WAAW,GAAG,EAAlB;AAGA,UAAIa,aAAa,GAAG,EAApB;AACA,UAAIuD,aAAa,GAAG,CAApB;;AAEA,WAAI,IAAIC,CAAC,GAACC,QAAQ,CAAC,KAAK7E,KAAL,CAAWC,OAAZ,CAAlB,EAAuC2E,CAAC,IAAEC,QAAQ,CAAC,KAAK7E,KAAL,CAAWG,OAAZ,CAAlD,EAAuEyE,CAAC,EAAxE,EAA2E;AACvErE,QAAAA,WAAW,IAAI,YAAUqE,CAAV,GAAY,WAA3B;AACAH,QAAAA,MAAM,CAAC,KAAGG,CAAJ,CAAN,GAAa,CAAb;AACH;;AAED,WAAI,IAAIE,IAAR,IAAgB1C,MAAhB,EAAuB;AACnBoC,QAAAA,MAAM,GAAC,CAAP;AACAF,QAAAA,MAAM,GAAGA,MAAM,GAAG,UAAT,GAAqBQ,IAAI,CAACA,IAAL,CAAUC,SAAV,CAAoB,CAApB,EAAsB,CAAtB,CAArB,GAA+C,OAAxD;;AACA,aAAI,IAAIH,CAAC,GAACC,QAAQ,CAAC,KAAK7E,KAAL,CAAWC,OAAZ,CAAlB,EAAuC2E,CAAC,IAAEC,QAAQ,CAAC,KAAK7E,KAAL,CAAWG,OAAZ,CAAlD,EAAuEyE,CAAC,EAAxE,EAA2E;AACvEN,UAAAA,MAAM,IAAI,SAAOQ,IAAI,CAACE,KAAL,CAAW,KAAGJ,CAAd,CAAP,GAAwB,OAAlC;AACAJ,UAAAA,MAAM,IAAIM,IAAI,CAACE,KAAL,CAAW,KAAGJ,CAAd,CAAV;AACAH,UAAAA,MAAM,CAAC,KAAGG,CAAJ,CAAN,IAAgBE,IAAI,CAACE,KAAL,CAAW,KAAGJ,CAAd,CAAhB;AACH;;AACDN,QAAAA,MAAM,IAAI,SAAOE,MAAP,GAAc,YAAxB;AACH;;AAEDlE,MAAAA,YAAY,GAAGA,YAAY,GAAG,mCAA9B;;AACA,WAAI,IAAIsE,CAAR,IAAaH,MAAb,EAAoB;AAChBnE,QAAAA,YAAY,GAAGA,YAAY,GAAG,SAAf,GAAyBmE,MAAM,CAACG,CAAD,CAA/B,GAAmC,WAAlD;AACAF,QAAAA,UAAU,IAAID,MAAM,CAACG,CAAD,CAApB;AACH;;AACDtE,MAAAA,YAAY,GAAGA,YAAY,GAAI,SAAhB,GAA0BoE,UAA1B,GAAqC,WAApD,CApCkB,CAsClB;;AACAH,MAAAA,OAAO,IAAI,WAAX;AACAA,MAAAA,OAAO,IAAI,kFAAX;AACAA,MAAAA,OAAO,IAAI,2EAAX;AACAA,MAAAA,OAAO,IAAI,4EAAX;AACAA,MAAAA,OAAO,IAAI,WAAX;AAEArD,MAAAA,QAAQ,IAAI,EAAZ;AAEAyD,MAAAA,aAAa,IAAIvD,aAAjB;AAEA,UAAI6D,UAAU,GAAG,EAAjB;AACA,YAAMA,UAAU,CAACnC,IAAX,CACF;AAAK,QAAA,KAAK,EAAC,4BAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,GAAG,EAAC,iBAAT;AAA2B,QAAA,MAAM,EAAC,KAAlC;AAAwC,QAAA,KAAK,EAAC,KAA9C;AAAoD,QAAA,KAAK,EAAE;AAAEoC,UAAAA,UAAU,EAAE,EAAd;AAAkBC,UAAAA,SAAS,EAAE;AAA7B,SAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAII;AAAK,QAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,GAAG,EAAC,iBAAT;AAA2B,QAAA,MAAM,EAAC,KAAlC;AAAwC,QAAA,KAAK,EAAC,KAA9C;AAAoD,QAAA,KAAK,EAAE;AAAED,UAAAA,UAAU,EAAE,EAAd;AAAkBC,UAAAA,SAAS,EAAE;AAA7B,SAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAJJ,EAOI;AAAK,QAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPJ,CADE,CAAN;AAaA,YAAM,KAAKpD,QAAL,CAAc;AAChBzB,QAAAA,YAAY,EAAEA,YADE;AAEhBC,QAAAA,WAAW,EAAEA,WAFG;AAGhBF,QAAAA,SAAS,EAAEiE,MAHK;AAIhBrD,QAAAA,QAAQ,EAAEsD,OAJM;AAKhBrD,QAAAA,QAAQ,EAAEA,QALM;AAMhBC,QAAAA,kBAAkB,EAAEwD,aANJ;AAOhBvD,QAAAA,aAAa,EAAEA,aAPC;AAQhBN,QAAAA,UAAU,EAAC,IARK;AAShBO,QAAAA,cAAc,EAAE4D;AATA,OAAd,CAAN;AAaH,KAhFD;AAkFH;;AAGDG,EAAAA,MAAM,GAAG;AAEL,UAAMC,EAAE,GAAG,KAAKtF,KAAL,CAAWG,OAAtB;AACA,UAAMoF,EAAE,GAAG,KAAKvF,KAAL,CAAWK,OAAtB;;AAEA,QAAG,KAAKJ,KAAL,CAAWyB,GAAX,IAAgB,KAAhB,IAAuB,CAAC,KAAKzB,KAAL,CAAWgB,UAAtC,EAAiD;AAC7CuE,MAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,QAA5B;AACH,KAFD,MAEK;AACDH,MAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBE,MAAxB,CAA+B,QAA/B;AACH;;AAED,QAAI,KAAK5F,KAAL,CAAWK,OAAX,IAAsB,KAAKJ,KAAL,CAAWG,OAAjC,IAA4C,KAAKJ,KAAL,CAAWG,OAAX,IAAsB,KAAKF,KAAL,CAAWC,OAA7E,IAAwF,KAAKD,KAAL,CAAWW,sBAAX,IAAqC,KAAKZ,KAAL,CAAWW,SAA5I,EAAuJ;AAEnJ,WAAKqB,QAAL,CAAc;AACV5B,QAAAA,OAAO,EAAE,KAAKJ,KAAL,CAAWK,OADV;AAEVH,QAAAA,OAAO,EAAE,KAAKF,KAAL,CAAWG,OAFV;AAGVS,QAAAA,sBAAsB,EAAE,KAAKZ,KAAL,CAAWW,SAHzB;AAIVD,QAAAA,WAAW,EAAE,KAAKV,KAAL,CAAWW,SAJd;AAKVG,QAAAA,YAAY,EAAE,KALJ;AAMVC,QAAAA,UAAU,EAAE,KANF;AAOVC,QAAAA,iBAAiB,EAAE,KAPT;AAQVC,QAAAA,UAAU,EAAE;AARF,OAAd,EAUG,YAAY;AACX,aAAKW,YAAL;AACA,aAAKE,cAAL;AACH,OAbD;AAcH;;AAED,QAAG,KAAK7B,KAAL,CAAWc,UAAX,IAAyB,KAAKd,KAAL,CAAWa,YAApC,IAAoD,CAAC,KAAKb,KAAL,CAAWe,iBAAhE,IAAqF,KAAKf,KAAL,CAAWyB,GAAX,IAAgB,KAAxG,EAA8G;AAC1GmE,MAAAA,UAAU,CAAC,MAAM;AAEbnG,QAAAA,OAAO,CAAC,KAAKO,KAAL,CAAWmB,kBAAZ,EAA+B,KAAKnB,KAAL,CAAWoB,aAA1C,EAAwD,KAAKpB,KAAL,CAAWO,WAAnE,EAAgF,KAAKP,KAAL,CAAWK,SAA3F,EAAqG,KAAKL,KAAL,CAAWiB,QAAhH,EAA0H,KAAKjB,KAAL,CAAWkB,QAArI,EAA8I,KAAKlB,KAAL,CAAWqB,cAAzJ,EAAwK,KAAKtB,KAAL,CAAWG,OAAnL,EAA2L,KAAKH,KAAL,CAAWK,OAAtM,EAA8M,KAAKJ,KAAL,CAAWY,WAAzN,EAAqO,KAAKb,KAAL,CAAWK,OAAhP,EAAwP,KAAKJ,KAAL,CAAWM,YAAnQ,EAAgR,IAAhR,EAAsR,KAAKN,KAAL,CAAW0B,MAAjS,CAAP,CAAgTO,IAAhT,CAAqT,MAAM4D,CAAN,IAAY;AAC7TrD,UAAAA,OAAO,CAACC,GAAR,CAAYoD,CAAZ;AACA,eAAK9D,QAAL,CAAc;AACVT,YAAAA,YAAY,EAACuE,CADH;AAEV9E,YAAAA,iBAAiB,EAAC;AAFR,WAAd,EAGE,MAAI;AACF6E,YAAAA,UAAU,CAAC,YAAY;AACnB,kBAAIpE,aAAa,GAAG,EAApB;;AACA,mBAAK,IAAIoD,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,KAAK5E,KAAL,CAAWsB,YAAX,CAAwBwE,MAA7C,EAAqDlB,CAAC,EAAtD,EAA0D;AACtD,sBAAMmB,MAAM,GAAG,MAAMR,QAAQ,CAACS,cAAT,CAAwB,cAAYpB,CAApC,CAArB;AAEA,sBAAMpF,WAAW,CAACuG,MAAD,CAAX,CACD9D,IADC,CACI,MAAOgE,OAAP,IAAmB;AACrB,wBAAMC,QAAQ,GAAG,MAAMD,OAAO,CAACE,SAAR,CAAkB,WAAlB,CAAvB;AAEA,wBAAM3E,aAAa,CAACsB,IAAd,CAAmB;AAAEsD,oBAAAA,MAAM,EAAEF,QAAV;AAAoBG,oBAAAA,KAAK,EAAEzB;AAA3B,mBAAnB,CAAN;AACA,wBAAM,KAAK7C,QAAL,CAAc;AAChBR,oBAAAA,oBAAoB,EAAE,KAAKvB,KAAL,CAAWuB,oBAAX,GAAkC;AADxC,mBAAd,EAEH,MAAM;AACL,wBAAI,KAAKvB,KAAL,CAAWuB,oBAAX,IAAmC,KAAKvB,KAAL,CAAWsB,YAAX,CAAwBwE,MAA/D,EAAuE;AACnEF,sBAAAA,UAAU,CAAC,YAAY;AACnB,6BAAK7D,QAAL,CAAc;AACVP,0BAAAA,aAAa,EAAEA,aADL;AAEVR,0BAAAA,UAAU,EAAC,IAFD;AAGVO,0BAAAA,oBAAoB,EAAE;AAHZ,yBAAd,EAIE,MAAI;AACF,+BAAKQ,QAAL,CAAc;AACVf,4BAAAA,UAAU,EAAE;AADF,2BAAd;AAGH,yBARD;AAUH,uBAXS,EAWP,IAXO,CAAV;AAYH;AACJ,mBAjBK,CAAN;AAoBH,iBAzBC,CAAN;AA0BH;AAEJ,aAjCS,EAiCP,IAjCO,CAAV;AAkCH,WAtCD;AAuCH,SAzCD;AA0CH,OA5CS,EA4CR,IA5CQ,CAAV;AA8CH;;AAED,WAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAE,KAAKhB,KAAL,CAAWyB,GAA5B;AAAiC,MAAA,QAAQ,EAAEA,GAAG,IAAI,KAAKK,YAAL,CAAkBL,GAAlB,CAAlD;AAA0E,MAAA,KAAK,EAAC,QAAhF;AAAyF,MAAA,SAAS,EAAC,SAAnG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,OAAd;AAAsB,MAAA,KAAK,EAAC,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQ;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,KAAK,EAAC,KAAZ;AAAkB,MAAA,KAAK,EAAE;AAAC6E,QAAAA,UAAU,EAAC,QAAZ;AAAsBC,QAAAA,cAAc,EAAC,QAArC;AAA+CpB,QAAAA,SAAS,EAAC;AAAzD,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,YAAd;AAA2B,MAAA,KAAK,EAAC,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2C,KAAKnF,KAAL,CAAW0B,MAAtD,CADJ,CADJ,EAII;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAsC,MAAA,KAAK,EAAC,QAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAyE2D,EAAE,IAAEC,EAAJ,GAAOD,EAAP,GAAUA,EAAE,GAAC,MAAH,GAAUC,EAA7F,CAJJ,CADJ,CADJ,EASI;AAAK,MAAA,SAAS,EAAC,YAAf;AAA4B,MAAA,KAAK,EAAE;AAACH,QAAAA,SAAS,EAAC;AAAX,OAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAK,MAAA,SAAS,EAAC,WAAf;AAA2B,MAAA,KAAK,EAAE;AAACA,QAAAA,SAAS,EAAC;AAAX,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAO,MAAA,SAAS,EAAC,2CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAJ,CADJ,EAEK7F,MAAM,CAAC,KAAKU,KAAL,CAAWO,WAAZ,CAFX,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAJ,CAHJ,CADJ,CADJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEMjB,MAAM,CAAC,KAAKU,KAAL,CAAWK,SAAZ,CAFZ,CARJ,EAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKf,MAAM,CAAC,KAAKU,KAAL,CAAWM,YAAZ,CADX,CAbJ,CADJ,CAFJ,CADJ,EAwBI;AAAK,MAAA,KAAK,EAAC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAI,MAAA,KAAK,EAAE;AAAC4E,QAAAA,UAAU,EAAC,EAAZ;AAAgB1B,QAAAA,QAAQ,EAAC;AAAzB,OAAX;AAAyC,MAAA,SAAS,EAAC,eAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFJ,EAGKlE,MAAM,CAAC,KAAKU,KAAL,CAAWiB,QAAZ,CAHX,CAFJ,CAxBJ,CATJ,CAFR,CADJ,EAgDQ,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,SAAd;AAAwB,MAAA,KAAK,EAAC,YAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAK,MAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,KAAK,EAAE;AAACiE,QAAAA,UAAU,EAAC,EAAZ;AAAgBC,QAAAA,SAAS,EAAC;AAA1B,OAAX;AAA0C,MAAA,SAAS,EAAC,YAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,EAKK,KAAKnF,KAAL,CAAWa,YAAX,GAAyB;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACtB;AAAK,MAAA,KAAK,EAAC,2CAAX;AAAuD,MAAA,KAAK,EAAE;AAAEkC,QAAAA,YAAY,EAAE;AAAhB,OAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAK/C,KAAL,CAAWY,WADhB,CADsB,CAAzB,GAIQ,IATb,CAFJ,CAhDR,EA8DI,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,KAAd;AAAoB,MAAA,KAAK,EAAC,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAK,MAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWc,UAAX,IAAyB,KAAKd,KAAL,CAAWa,YAApC,IAAoD,KAAKb,KAAL,CAAWgB,UAA/D,GAA2E;AAAEwF,QAAAA,OAAO,EAAE;AAAX,OAA3E,GAAkG,IAA9G;AAAoH,MAAA,SAAS,EAAC,6BAA9H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAK,MAAA,KAAK,EAAC,cAAX;AAA0B,MAAA,KAAK,EAAE;AAACC,QAAAA,SAAS,EAAC,QAAX;AAAoBtB,QAAAA,SAAS,EAAC;AAA9B,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,CAFJ,EAQI;AAAK,MAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,EASI;AAAK,MAAA,KAAK,EAAC,eAAX;AAA2B,MAAA,KAAK,EAAE;AAACsB,QAAAA,SAAS,EAAC;AAAX,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,CATJ,EAYK,KAAKzG,KAAL,CAAWgB,UAAX,GACG;AAAI,MAAA,KAAK,EAAE;AAAEkE,QAAAA,UAAU,EAAE;AAAd,OAAX;AAA+B,MAAA,SAAS,EAAC,WAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADH,GAEC,IAdN,CADJ,CAFJ,EAqBI;AAAK,MAAA,SAAS,EAAC,4CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKlF,KAAL,CAAWgB,UAAX,GACG,oBAAC,GAAD;AAAK,MAAA,OAAO,EAAE,KAAKhB,KAAL,CAAWwB,aAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADH,GAEC,IAHN,CArBJ,CADJ,EA6BI;AAAK,MAAA,KAAK,EAAE,KAAKxB,KAAL,CAAWc,UAAX,IAAyB,KAAKd,KAAL,CAAWa,YAApC,IAAoD,KAAKb,KAAL,CAAWgB,UAA/D,GAA8E;AAAEwF,QAAAA,OAAO,EAAE;AAAX,OAA9E,GAAmG;AAAErB,QAAAA,SAAS,EAAE;AAAb,OAA/G;AAAmI,MAAA,EAAE,EAAC,OAAtI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKnF,KAAL,CAAWsB,YADhB,CA7BJ,CA9DJ,CADA,CAFJ;AA4GH;;AA3YoC;;AA6YzC,eAAezB,gBAAf","sourcesContent":["/* App.js */\n\nimport React, { Component } from 'react';\nimport { Tabs, Tab } from 'react-bootstrap';\nimport CanvasJSReact, { CanvasJS } from '../../canvasjs.react';\nimport Parser from 'html-react-parser';\nimport Pdf from '../Pdf/pdf';\nimport html2canvas from 'html2canvas';\nimport htmlPDF from '../../BibliotecaFunciones/HtmlPDF.js';\nimport { pdf } from '@react-pdf/renderer';\nimport './TiposDeBeneficio.css';\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\n\nvar url = 'https://teamrocket-reportes-backend.herokuapp.com/ApiController/';\n\n//var pdf = require('html-pdf');\n\n\nclass TiposDeBeneficio extends Component {\n\n    constructor(props){//constructor inicial\n        super(props);\n        this.state = {\n            anioini : ''+this.props.anioIni, //año inicial\n            aniofin : ''+this.props.anioFin, //año final\n            htmlTabla : '',   //Html de la tabla\n            cadenaFooter: '',\n            cadenaAnios: '',\n            miHtml: '',\n            tipoGrafica: this.props.graficoMF,\n            tipoGraficaVerificador: this.props.graficoMF,\n            jsonGrafica: null,\n            cargoGrafica: false,\n            cargoTabla: false,\n            cargoTomadorFotos: false,\n            cargoFotos: false,\n            leyenda1: '',\n            leyenda2: '',\n            contadorLineaTabla: 0,\n            contadorTabla: 0,\n            htmlencabezado: [],\n            copiaParaPdf: [],\n            contadorCargaPaginas:0,\n            arregloImagen:[],\n            tipoGraficaVerificador: this.props.graficoMF,\n            key: 'tabla',\n            titulo: \"Beneficios de los Programas de Posgrado\"\n        };\n\n\n        this.obtenerTabla = this.obtenerTabla.bind(this);\n        this.obtenerGrafica = this.obtenerGrafica.bind(this);\n        this.handleSelect = this.handleSelect.bind(this);\n\n        this.obtenerTabla();\n        this.obtenerGrafica();\n    }\n\n    handleSelect(key) {\n        this.setState({key});\n    }\n\n    obtenerGrafica() {\n        fetch(url+'beneficioGrafica?fecha_inicio='+this.state.anioini+'&fecha_fin='+this.state.aniofin)\n        .then((response)=>{\n            return response.json();\n        })\n        .then(async (result)=>{\n\n            var miContador = this.state.anioini;\n            var resultado =[];\n           for (let fila of result) {\n                console.log(fila);\n                fila.name=''+miContador;\n                fila.showInLegend=true;\n                fila.type=this.state.tipoGrafica;\n                miContador++;\n            }\n\n            var arregloData = [];\n            arregloData.push(\n                //<div class=\"row align-items-center\">\n                    //<div class=\"col col-md-12\">\n                    <div style={{ marginBottom: 50 }}>\n                        <CanvasJSChart style={{marginBottom: 50,width:'100%'}} options = {{\n                            animationEnabled: true,\n                            title:{\n                                text: this.state.titulo,\n                                fontFamily: \"Encode Sans Semi Expanded\",\n                                fontColor: \"#4C4C4C\",\n                                fontWeight: \"normal\",\n                            },\t\n                            subtitles:[\n                            {\n                                text: \" . \",\n                                fontSize: 20,\n                                fontColor:'white'\n                            }\n                            ],\n                            axisX:{\n                                title: \"Programas\",\n                                titleFontFamily: \"Encode Sans Semi Expanded\",\n                                titleFontColor: \"#4C4C4C\",\n                                lineColor: \"#4C4C4C\",\n                                labelFontColor: \"#4C4C4C\",\n                                tickColor: \"#4C4C4C\",\n                                },\t\n                            axisY: {\n                                title: \"Alumnos\",\n                                titleFontFamily: \"Encode Sans Semi Expanded\",\n                                titleFontColor: \"#4C4C4C\",\n                                lineColor: \"#4C4C4C\",\n                                labelFontColor: \"#4C4C4C\",\n                                tickColor: \"#4C4C4C\",\n                                interlacedColor: \"#F7F7F7\",\n                            },\n                            toolTip: {\n                                shared: true\n                            },\n                            legend: {\n                                cursor:\"pointer\",\n                                fontFamily: \"Encode Sans Semi Expanded\",\n                                fontWeight: \"normal\",\n                            },\t\n\n                            data: result\n                        }} />\n                    </div>\n                        \n                //</div>\n            );\n\n            await this.setState({\n                jsonGrafica:arregloData,\n                cargoGrafica:true\n            })\n        })\n    }\n\n\n    obtenerTabla(){\n\n        fetch(url+'beneficio?fecha_inicio='+this.state.anioini+'&fecha_fin='+this.state.aniofin)//hace el llamado al dominio que se le envió donde retornara respuesta de la funcion\n        .then((response)=>{\n            return response.json();\n        })\n        .then(async (result)=>{\n\n            let cadena=\"\";\n            let leyenda = \"\";\n            let leyenda2 = \"\";\n            let cadenaFooter = \"\";\n            var totalD=0;\n            var totalA = [];\n            var totalTotal = 0;\n            var cadenaAnios = '';\n\n            \n            var contadorTabla = 10;\n            var contadorLinea = 0;\n\n            for(var i=parseInt(this.state.anioini);i<=parseInt(this.state.aniofin);i++){\n                cadenaAnios += '<th><b>'+i+'</b></th>';\n                totalA[\"\"+i]=0;\n            }\n\n            for(var tipo of result){\n                totalD=0;\n                cadena = cadena + \"<tr><td>\"+ tipo.tipo.substring(0,3) +\"</td>\";\n                for(var i=parseInt(this.state.anioini);i<=parseInt(this.state.aniofin);i++){\n                    cadena += \"<td>\"+tipo.anios[\"\"+i]+\"</td>\"\n                    totalD += tipo.anios[\"\"+i];\n                    totalA[\"\"+i] += tipo.anios[\"\"+i];\n                }\n                cadena += \"<td>\"+totalD+\"</td></tr>\";\n            }\n\n            cadenaFooter = cadenaFooter + \"<tr><td><b>Total General</b></td>\";\n            for(var i in totalA){\n                cadenaFooter = cadenaFooter + \"<td><b>\"+totalA[i]+\"</b></td>\";\n                totalTotal += totalA[i];\n            }\n            cadenaFooter = cadenaFooter +  \"<td><b>\"+totalTotal+\"</b></td>\";\n            \n            //Aqui se llena los datos de la leyenda\n            leyenda += \"<hr></hr>\";\n            leyenda += \"<text className='textLeyenda'><tr><td>ADM: ADMINISTRATIVO UNMSM</td></text></br>\";\n            leyenda += \"<text className='textLeyenda'><tr><td>DOC: DOCENTE UNMSM</td></text></br>\";\n            leyenda += \"<text className='textLeyenda'><tr><td>EGR: EGRESADO UNMSM</td></text></br>\";\n            leyenda += \"<hr></hr>\";\n\n            leyenda2 += \"\";\n\n            contadorLinea += contadorTabla;\n\n            let encabezado = []\n            await encabezado.push(\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-md-3\">\n                        <img src=\"unmsmIMagen.png\" height=\"240\" width='180' style={{ marginLeft: 60, marginTop: 20 }} />\n                    </div>\n                    <div class=\"col-md-7\">\n                        <img src=\"unmsmTitulo.png\" height=\"240\" width='500' style={{ marginLeft: 25, marginTop: 10 }} />\n                    </div>\n                    <div class=\"col-md-2\">\n                    </div>\n                </div>\n            );\n\n            await this.setState({\n                cadenaFooter: cadenaFooter,\n                cadenaAnios: cadenaAnios,\n                htmlTabla: cadena, \n                leyenda1: leyenda,\n                leyenda2: leyenda2,\n                contadorLineaTabla: contadorLinea,\n                contadorTabla: contadorTabla,\n                cargoTabla:true,\n                htmlencabezado: encabezado\n            });\n            \n            \n        })\n\n    }\n\n\n    render() {\n\n        const aI = this.props.anioIni;\n        const aF = this.props.anioFin;\n\n        if(this.state.key==\"pdf\"&&!this.state.cargoFotos){\n            document.body.classList.add(\"oculto\");\n        }else{\n            document.body.classList.remove(\"oculto\");\n        }\n\n        if (this.props.anioFin != this.state.aniofin || this.props.anioIni != this.state.anioini || this.state.tipoGraficaVerificador != this.props.graficoMF) {\n            \n            this.setState({\n                aniofin: this.props.anioFin,\n                anioini: this.props.anioIni,\n                tipoGraficaVerificador: this.props.graficoMF,\n                tipoGrafica: this.props.graficoMF,\n                cargoGrafica: false,\n                cargoTabla: false,\n                cargoTomadorFotos: false,\n                cargoFotos: false\n\n            }, async () => {\n                this.obtenerTabla();\n                this.obtenerGrafica();\n            });\n        }\n\n        if(this.state.cargoTabla && this.state.cargoGrafica && !this.state.cargoTomadorFotos && this.state.key==\"pdf\"){\n            setTimeout(() => {\n                \n                htmlPDF(this.state.contadorLineaTabla,this.state.contadorTabla,this.state.cadenaAnios, this.state.htmlTabla,this.state.leyenda1, this.state.leyenda2,this.state.htmlencabezado,this.props.anioIni,this.props.anioFin,this.state.jsonGrafica,this.props.anioFin,this.state.cadenaFooter,null, this.state.titulo).then(async(x) => {\n                    console.log(x);\n                    this.setState({\n                        copiaParaPdf:x,\n                        cargoTomadorFotos:true\n                    },()=>{\n                        setTimeout(async () => {\n                            var arregloImagen = [];\n                            for (var i = 1; i <= this.state.copiaParaPdf.length; i++) {\n                                const input2 = await document.getElementById('imagenPdf'+i);\n                                \n                                await html2canvas(input2)\n                                    .then(async (canvas2) => {\n                                        const imgData2 = await canvas2.toDataURL('image/png');\n                                        \n                                        await arregloImagen.push({ imagen: imgData2, orden: i });\n                                        await this.setState({\n                                            contadorCargaPaginas: this.state.contadorCargaPaginas + 1\n                                        }, () => {\n                                            if (this.state.contadorCargaPaginas == this.state.copiaParaPdf.length) {\n                                                setTimeout(async () => {\n                                                    this.setState({\n                                                        arregloImagen: arregloImagen,\n                                                        cargoFotos:true,\n                                                        contadorCargaPaginas: 0\n                                                    },()=>{\n                                                        this.setState({\n                                                            cargoFotos: true\n                                                        })\n                                                    });\n                                                    \n                                                }, 3000);\n                                            }\n                                        });\n        \n        \n                                    });\n                            }\n        \n                        }, 3000);\n                    });\n                });\n            },3000);\n            \n        }\n        \n        return (\n            \n            <div>  \n            <Tabs activeKey={this.state.key} onSelect={key => this.handleSelect(key)} align=\"center\" className=\"textTab\">\n                <Tab eventKey=\"tabla\" title=\"Tabla\">\n                        {/* Aca ponemos la tabla */}\n                        <div class=\"panel\">\n                            <div class=\"panel-heading\"  >\n                                <div  class=\"row\" style={{alignItems:'center', justifyContent:'center', marginTop:20}}>\n                                    <div className=\"col-md-12 \">\n                                        <h5 className=\"textTitulo\" align=\"center\">{this.state.titulo}</h5>\n                                    </div>\n                                    <div className=\"textTitulo col-md-12\" align=\"center\" >Espacio Temporal: {aI==aF?aI:aI+\" al \"+aF}</div>\n                                </div>\n                            </div>\n                            <div className=\"panel-body\" style={{marginTop:20}}>\n                                <div class=\"row\">\n                                    <div className=\"col-md-1\"></div>\n                                    <div className=\"col-md-10\" style={{marginTop:20}}>\n                                        <table className=\"table table-bordered TablaEstadisticaAzul\">\n                                            <thead>\n                                                <tr>\n                                                    <th><b>Programas</b></th>\n                                                    {Parser(this.state.cadenaAnios)} \n                                                    <th><b>Total General</b></th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n\n                                                { Parser(this.state.htmlTabla) }\n\n                                            </tbody>\n                                            <tfoot>\n                                                {Parser(this.state.cadenaFooter)}                                  \n                                            </tfoot>\n                                        </table>\n                                    </div>\n                                </div>\n                                \n                                <div class=\"row\">\n                                    <div className=\"col col-md-1\"></div>\n                                    <div className=\"col col-md-10\">\n                                        <hr></hr>\n                                        <h5 style={{marginLeft:10, fontSize:13}} className=\"textSubtitulo\">Leyenda: </h5> \n                                        {Parser(this.state.leyenda1)} \n                                    </div> \n                                </div>\n                               \n                            </div>\n                        </div>\n                    </Tab>\n                    <Tab eventKey=\"grafica\" title=\"Gráfica\">\n                        {/* Aca ponemos la gráfica */}\n                        <div class=\"container\">\n                            <div className=\"row\" >\n                                <h5 style={{marginLeft:10, marginTop:20}} className=\"textTitulo\">Gráficas: </h5>\n                                <hr></hr>\n                            </div>\n                            {this.state.cargoGrafica ?<div className=\"row\" >\n                                <div class=\"panel-body col-md-7 mr-md-auto ml-md-auto\" style={{ marginBottom: 50 }}>\n                                    {this.state.jsonGrafica}\n                                </div>\n                            </div> : null} \n                        </div>\n                    </Tab>\n                <Tab eventKey=\"pdf\" title=\"PDF\" >\n                    <div className=\"panel row align-items-center\" >\n                            \n                        <div style={this.state.cargoTabla && this.state.cargoGrafica && this.state.cargoFotos ?{ display: 'none' }  : null} className=\"panel-heading col col-md-12\">\n                            <div class=\"row\">\n                                <div class=\"col col-md-5\"></div>\n                                <div class=\"col col-md-2\" style={{textAlign:\"center\",marginTop:180}}>\n                                    <div class=\"spiner\">\n                                        <div class=\"ball\"></div>\n                                        <div class=\"ball1\"></div>\n                                    </div>\n                                </div>\n                                <div class=\"col col-md-5\"></div>\n                                <div class=\"col col-md-12\" style={{textAlign:\"center\"}}>\n                                    <h1>Cargando...</h1>\n                                </div>\n                                {this.state.cargoFotos ?\n                                    <h4 style={{ marginLeft: 60 }} className=\"texTitulo\">Visualizar PDF</h4>\n                                : null}\n                            </div>\n                            \n                        </div>\n                        <div className=\"panel-body col-md-11 mr-md-auto ml-md-auto\">\n                            {this.state.cargoFotos ?\n                                <Pdf imagen2={this.state.arregloImagen}></Pdf> \n                            : null}\n                        </div>\n                    </div>\n\n                    <div style={this.state.cargoTabla && this.state.cargoGrafica && this.state.cargoFotos  ?  { display: 'none' }: { marginTop: 500 }} id=\"copia\">\n                        {this.state.copiaParaPdf}\n                    </div>\n                </Tab>\n\n            </Tabs>\n\n\n\n\n\n\n        </div>\n        );\n    }\n}\nexport default TiposDeBeneficio;\n\n"]},"metadata":{},"sourceType":"module"}